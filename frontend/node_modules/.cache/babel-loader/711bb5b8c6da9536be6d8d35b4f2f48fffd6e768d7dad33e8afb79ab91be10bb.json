{"ast":null,"code":"var _jsxFileName = \"/Users/rohundhar/Desktop/Projects/kcs/frontend/src/components/LinkEditor.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { getNotes, getRelationshipTypes } from '../api/apiClient';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LinkEditor = ({\n  suggestedLinks,\n  setSuggestedLinks\n}) => {\n  _s();\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [relTypes, setRelTypes] = useState([]);\n  const [selectedRelTypeId, setSelectedRelTypeId] = useState('');\n  useEffect(() => {\n    const fetchRelTypes = async () => {\n      try {\n        const response = await getRelationshipTypes();\n        setRelTypes(response.data);\n        if (response.data.length > 0) {\n          setSelectedRelTypeId(response.data[0]._id);\n        }\n      } catch (error) {\n        console.error(\"Error fetching relationship types:\", error);\n      }\n    };\n    fetchRelTypes();\n  }, []);\n  useEffect(() => {\n    if (searchTerm.length < 2) {\n      setSearchResults([]);\n      return;\n    }\n    const fetchResults = async () => {\n      try {\n        const response = await getNotes('committed', searchTerm);\n        setSearchResults(response.data);\n      } catch (error) {\n        console.error(\"Error searching notes:\", error);\n      }\n    };\n    const debounce = setTimeout(fetchResults, 300);\n    return () => clearTimeout(debounce);\n  }, [searchTerm]);\n  const addLink = targetNote => {\n    var _relTypes$find;\n    if (!selectedRelTypeId) {\n      alert(\"Please select a relationship type.\");\n      return;\n    }\n    const newLink = {\n      targetNoteId: targetNote._id,\n      relationshipTypeId: selectedRelTypeId,\n      targetNoteTitle: targetNote.title,\n      relationshipTypeLabel: ((_relTypes$find = relTypes.find(rt => rt._id === selectedRelTypeId)) === null || _relTypes$find === void 0 ? void 0 : _relTypes$find.label) || 'unknown'\n    };\n\n    // Prevent adding duplicate links\n    if (!suggestedLinks.some(link => link.targetNoteId === newLink.targetNoteId)) {\n      setSuggestedLinks(prev => [...prev, newLink]);\n    }\n    setSearchTerm('');\n    setSearchResults([]);\n  };\n  const removeLink = targetNoteId => {\n    setSuggestedLinks(prev => prev.filter(link => link.targetNoteId !== targetNoteId));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"link-editor-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      children: \"Add Links to Committed Notes\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"add-link-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n        value: selectedRelTypeId,\n        onChange: e => setSelectedRelTypeId(e.target.value),\n        children: relTypes.map(rt => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: rt._id,\n          children: rt.label\n        }, rt._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'relative',\n          flexGrow: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Search for a note to link...\",\n          value: searchTerm,\n          onChange: e => setSearchTerm(e.target.value),\n          style: {\n            width: '100%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), searchResults.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"search-results\",\n          children: searchResults.map(note => /*#__PURE__*/_jsxDEV(\"li\", {\n            onClick: () => addLink(note),\n            children: note.title\n          }, note._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        children: \"Staged Links\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: suggestedLinks.map(link => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [\"This note \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: link.relationshipTypeLabel\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 31\n          }, this), \" \\\"\", link.targetNoteTitle, \"\\\"\", /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => removeLink(link.targetNoteId),\n            style: {\n              marginLeft: '10px',\n              color: 'red',\n              border: 'none',\n              background: 'none',\n              cursor: 'pointer'\n            },\n            children: \"X\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 21\n          }, this)]\n        }, link.targetNoteId, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n};\n_s(LinkEditor, \"rwLXkoctVtLCUCsvAQX9EhEO2pE=\");\n_c = LinkEditor;\nexport default LinkEditor;\nvar _c;\n$RefreshReg$(_c, \"LinkEditor\");","map":{"version":3,"names":["React","useState","useEffect","getNotes","getRelationshipTypes","jsxDEV","_jsxDEV","LinkEditor","suggestedLinks","setSuggestedLinks","_s","searchTerm","setSearchTerm","searchResults","setSearchResults","relTypes","setRelTypes","selectedRelTypeId","setSelectedRelTypeId","fetchRelTypes","response","data","length","_id","error","console","fetchResults","debounce","setTimeout","clearTimeout","addLink","targetNote","_relTypes$find","alert","newLink","targetNoteId","relationshipTypeId","targetNoteTitle","title","relationshipTypeLabel","find","rt","label","some","link","prev","removeLink","filter","className","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","map","style","position","flexGrow","type","placeholder","width","note","onClick","marginLeft","color","border","background","cursor","_c","$RefreshReg$"],"sources":["/Users/rohundhar/Desktop/Projects/kcs/frontend/src/components/LinkEditor.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getNotes, getRelationshipTypes } from '../api/apiClient';\nimport { Note, RelationshipType, SuggestedLink } from '../types';\n\ninterface LinkEditorProps {\n  suggestedLinks: SuggestedLink[];\n  setSuggestedLinks: React.Dispatch<React.SetStateAction<SuggestedLink[]>>;\n}\n\nconst LinkEditor: React.FC<LinkEditorProps> = ({ suggestedLinks, setSuggestedLinks }) => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState<Note[]>([]);\n  const [relTypes, setRelTypes] = useState<RelationshipType[]>([]);\n  const [selectedRelTypeId, setSelectedRelTypeId] = useState<string>('');\n\n  useEffect(() => {\n    const fetchRelTypes = async () => {\n      try {\n        const response = await getRelationshipTypes();\n        setRelTypes(response.data);\n        if (response.data.length > 0) {\n          setSelectedRelTypeId(response.data[0]._id);\n        }\n      } catch (error) {\n        console.error(\"Error fetching relationship types:\", error);\n      }\n    };\n    fetchRelTypes();\n  }, []);\n\n  useEffect(() => {\n    if (searchTerm.length < 2) {\n      setSearchResults([]);\n      return;\n    }\n    const fetchResults = async () => {\n      try {\n        const response = await getNotes('committed', searchTerm);\n        setSearchResults(response.data);\n      } catch (error) {\n        console.error(\"Error searching notes:\", error);\n      }\n    };\n    \n    const debounce = setTimeout(fetchResults, 300);\n    return () => clearTimeout(debounce);\n\n  }, [searchTerm]);\n\n  const addLink = (targetNote: Note) => {\n    if (!selectedRelTypeId) {\n      alert(\"Please select a relationship type.\");\n      return;\n    }\n    const newLink: SuggestedLink = {\n      targetNoteId: targetNote._id,\n      relationshipTypeId: selectedRelTypeId,\n      targetNoteTitle: targetNote.title,\n      relationshipTypeLabel: relTypes.find(rt => rt._id === selectedRelTypeId)?.label || 'unknown'\n    };\n\n    // Prevent adding duplicate links\n    if (!suggestedLinks.some(link => link.targetNoteId === newLink.targetNoteId)) {\n        setSuggestedLinks(prev => [...prev, newLink]);\n    }\n    \n    setSearchTerm('');\n    setSearchResults([]);\n  };\n\n  const removeLink = (targetNoteId: string) => {\n    setSuggestedLinks(prev => prev.filter(link => link.targetNoteId !== targetNoteId));\n  }\n\n  return (\n    <div className=\"link-editor-container\">\n      <h4>Add Links to Committed Notes</h4>\n      <div className=\"add-link-form\">\n        <select value={selectedRelTypeId} onChange={e => setSelectedRelTypeId(e.target.value)}>\n          {relTypes.map(rt => (\n            <option key={rt._id} value={rt._id}>{rt.label}</option>\n          ))}\n        </select>\n        <div style={{ position: 'relative', flexGrow: 1 }}>\n          <input\n            type=\"text\"\n            placeholder=\"Search for a note to link...\"\n            value={searchTerm}\n            onChange={e => setSearchTerm(e.target.value)}\n            style={{ width: '100%' }}\n          />\n          {searchResults.length > 0 && (\n            <ul className=\"search-results\">\n              {searchResults.map(note => (\n                <li key={note._id} onClick={() => addLink(note)}>\n                  {note.title}\n                </li>\n              ))}\n            </ul>\n          )}\n        </div>\n      </div>\n      <div>\n        <h5>Staged Links</h5>\n        <ul>\n            {suggestedLinks.map(link => (\n                <li key={link.targetNoteId}>\n                    This note <strong>{link.relationshipTypeLabel}</strong> \"{link.targetNoteTitle}\"\n                    <button onClick={() => removeLink(link.targetNoteId)} style={{ marginLeft: '10px', color: 'red', border: 'none', background: 'none', cursor: 'pointer' }}>X</button>\n                </li>\n            ))}\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nexport default LinkEditor;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}